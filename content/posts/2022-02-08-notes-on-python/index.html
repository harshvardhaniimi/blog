---
title: Cheatsheet on Python
subtitle: Some things that I'll likely forget
summary: Some things that I'll likely forget
author: Harshvardhan
date: '2022-02-08'
slug: notes-on-python
categories:
  - Python
tags: []
---



<div id="installing-packages" class="section level1">
<h1>Installing Packages</h1>
<p>The process to install package depends on the Python environment you are using.</p>
<p>There are two possibilities: <code>pip</code>, <code>conda</code> and within Jupyter Hub.
If you are using Anaconda (Navigator), use <code>conda</code>.
<code>pip</code> will install for all environments; <code>conda</code> will install for (activated) conda environment only.
See <a href="#python-environments"><strong>??</strong></a> for details on Python environments.</p>
<p><strong>Generally, always use <code>conda</code> for handling environments and <code>pip</code> to install packages</strong>.</p>
<pre class="python"><code>pip install &lt;package&gt;</code></pre>
<p>For a specific version, you can use <code>pip install pandas==2.0.1</code>.</p>
<p>Here are some common pip commands that’ll come in handy.
You can get the full list with <code>pip help</code>.</p>
<ol style="list-style-type: decimal">
<li><strong>pip freeze</strong> or <strong>pip list</strong> will give a list of all packages that are installed along with their version numbers</li>
<li><strong>pip check</strong> will list all packages that have conflicted or broken requirements</li>
<li><strong>pip show numpy</strong> will show all details of that package, including package version and location where it is installed. (<strong>numpy</strong> is an example, replace accordingly).</li>
</ol>
<p>To uninstall a package, use <code>pip uninstall &lt;package&gt;</code>.</p>
</div>
<div id="terminal-in-jupyter" class="section level1">
<h1>Terminal in Jupyter</h1>
<p>Terminal commands can be passed within the Jupyter notebook.
Any command starting with <code>!</code> would be run like a terminal command within the Jupyter notebook.</p>
<pre class="python"><code># list all files in current directory
!ls

# delete all files in the current folder
!rm -r *</code></pre>
</div>
<div id="debugging-in-the-current-state" class="section level1">
<h1>Debugging in the Current State</h1>
<p>Many a time our code crashes and we would like to investigate the environment at that moment.
Running <code>%debug</code> in Jupyter Notebook immediately after the code crashes would open a debugging environment where you can see variables’ values, etc.</p>
<pre class="python"><code># some code that crashed
x = some_function(y)

# in the next Jupyter cell, run this command
%debug</code></pre>
</div>
<div id="printing" class="section level1">
<h1>Printing</h1>
<p>There are two methods: <code>print()</code> and <code>pprint()</code>.
They both serve the save cause but <code>pprint()</code> is better at displaying complex data structures such as list of lists or JSON files.</p>
<p>It is worthwhile to mention <code>f</code>-strings.
They are usually more compact than writing full print statements.
Furthermore, if you want to print value of a variable, they’re really short.</p>
<pre class="python"><code># enclose the variable in curly braces
print(f&quot;Value of x is {x}&quot;)

# if you want to just print the value of, use {x=}
print(f&quot;{x=}&quot;)</code></pre>
</div>
<div id="adding-rows" class="section level1">
<h1>Adding Rows</h1>
<p>It is more efficient to create a list of rows first and then convert it to a pandas data frame.
As qmeeus <a href="https://stackoverflow.com/questions/55967976/python-panda-append-dataframe-in-loop?noredirect=1&amp;lq=1">said</a> on SO,</p>
<blockquote>
<p>Pandas dataframes do not work as a list, they are much more complex data structures and appending is not really considered the best approach.</p>
</blockquote>
<pre class="python"><code>data = []
for row in some_function_that_yields_data():
    data.append(row)

# either this
df = pd.DataFrame(data)

# or this
df = pd.concat([results, df], axis=0).reset_index(drop=True)</code></pre>
</div>
<div id="function" class="section level1">
<h1>Function</h1>
<div id="getting-help" class="section level2">
<h2>Getting Help</h2>
<p>To see details of a function in a Jupyter notebook, use <code>??</code> operator.
It will show you the body and the associated documentation (if available).</p>
<pre class="python"><code>??my_function()</code></pre>
</div>
<div id="modify-inplace" class="section level2">
<h2>Modify Inplace</h2>
<p>When you modify a value passed to a function, it modifies that object inplace.
For example, the following function would change the value.</p>
</div>
</div>
<div id="python-environments" class="section level1">
<h1>Python Environments</h1>
<ul>
<li><p>See <a href="https://conda.io/projects/conda/en/latest/user-guide/tasks/manage-environments.html#creating-an-environment-with-commands">Managing environments</a> for details.
Use <code>conda</code> for managing environments and packages.</p></li>
<li><p>Generally, avoid messing up with <code>base</code> environment.
Create a new one and use that.</p></li>
<li><p>Once you create a new environment, remember to <a href="https://code.visualstudio.com/docs/python/environments#:~:text=If%20you%20create%20a%20new%20conda%20environment%20while%20VS%20Code%20is%20running%2C%20use%20the%20refresh%20icon%20on%20the%20top%20right%20of%20the%20Python%3A%20Select%20Interpreter%20window%3B%20otherwise%20you%20may%20not%20see%20the%20environment%20there.">refresh</a> Visual Studio Code’s list of Python interpreters.</p></li>
</ul>
<div id="list-all-environments" class="section level2">
<h2>List all environments</h2>
<pre class="zsh"><code>conda env list</code></pre>
<p>Here is how it looks for me.</p>
<pre class="python"><code>(base) harshvardhan@harshmac17 ~ % conda env list
# conda environments:
#
base                  *  /Users/harshvardhan/opt/anaconda3
env_oct22                /Users/harshvardhan/opt/anaconda3/envs/env_oct22</code></pre>
</div>
<div id="create-an-environment" class="section level2">
<h2>Create an environment</h2>
<p>This will create an environment called <code>new_env</code>.</p>
<pre class="python"><code>conda create --name new_env</code></pre>
<p>Conda will ask you for permission <code>proceed ([y]/n)?</code>.
Type <code>y</code>.</p>
</div>
<div id="activate-an-environment" class="section level2">
<h2>Activate an environment</h2>
<p>This will activate the environment called <code>new_env</code>.
Remember that you can list all environment with <code>conda env list</code>.</p>
<pre class="python"><code>conda activate new_env</code></pre>
<blockquote>
<p><strong>VS Code Note:</strong> By default, the Python extension looks for and uses the first Python interpreter it finds in the system path.
To select a specific environment, use the <strong>Python: Select Interpreter</strong> command from the <strong>Command Palette</strong> (⇧⌘P).</p>
</blockquote>
</div>
<div id="clone-an-environment" class="section level2">
<h2>Clone an environment</h2>
<p>This will create a new environment <code>new_env</code> with the exact same packages as <code>old_env</code>.</p>
<pre class="python"><code>conda create --clone old_env --name new_env</code></pre>
</div>
<div id="remove-an-environment" class="section level2">
<h2>Remove an environment</h2>
<p>This will remove a Python environment called <code>old_env</code>.</p>
<pre class="python"><code>conda env remove --name old_env</code></pre>
</div>
<div id="list-all-packages" class="section level2">
<h2>List all packages</h2>
<p>This will list all packages in the current environment.</p>
<pre class="python"><code>conda list</code></pre>
</div>
<div id="update-all-packages" class="section level2">
<h2>Update all packages</h2>
<p>This will update all packages in the <strong>activated</strong> Python environment.
See above to list environments and select an environment.
Once you are in the activated environment, execute the following.</p>
<pre class="python"><code>conda update --all</code></pre>
</div>
<div id="using-pip-in-conda" class="section level2">
<h2>Using <code>pip</code> in Conda</h2>
<p><strong>This is not recommended.</strong> If you are feeling adventurous, give it a try!
See <a href="https://conda.io/projects/conda/en/latest/user-guide/tasks/manage-environments.html#using-pip-in-an-environment">Using pip in an environment</a>.
Also see a note on <a href="https://stackoverflow.com/a/44072944/8057777">dependency conflicts</a>.</p>
</div>
</div>
